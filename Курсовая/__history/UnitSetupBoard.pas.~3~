unit UnitSetupBoard;

interface

uses
    Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
    System.Classes, Vcl.Graphics,
    Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ExtCtrls,
    Vcl.Imaging.jpeg, Vcl.ActnMan, Vcl.ActnColorMaps, Vcl.ExtDlgs, Vcl.ComCtrls,
    Vcl.Imaging.pngimage, Vcl.Menus, System.UITypes, System.RegularExpressions, Math;

procedure StartNewGameAfterPrevFinished();

implementation

uses UnitMainForm;


procedure StartNewGameAfterPrevFinished();
var
    SaidNoSaving: Boolean;

begin
    SaidNoSaving := False;

    with FormMain do
    begin
        if not GameIsSaved then
            if MessageDlg('Вы хотите сохранить текущую партию?' +
            #10#13 + 'Иначе после открытия файла текущая партия будет удалена.',
            mtConfirmation, [mbYes, mbNo], 0) = mrYes then
                NSaveAsClick(FormMain)
            else
                SaidNoSaving := True;

        if (GameIsSaved or SaidNoSaving or (MessageDlg('Вы уверены, что хотите начать новую игру?' + #10#13 +
            'Текущая игра будет удалена.', mtConfirmation, [mbYes, mbCancel], 0) = mrYes)) then
        begin
            ResetChessboardToStandart();
            PanelGameEnded.Visible := False;
        end;
    end;
end;

end.
